(this.webpackJsonplibdrive=this.webpackJsonplibdrive||[]).push([[0],{149:function(e,t,a){},151:function(e,t,a){},153:function(e,t,a){},155:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(28),r=a(0),o=a.n(r),i=a(17),s=a.n(i),c=a(11),l=a(20),d=a(201),h=a(207),u=a(12),m=a(13),p=a(15),g=a(16),j=a(1),b=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),server:sessionStorage.getItem("server")||localStorage.getItem("server")},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.auth,a=e.server;return t&&a?Object(j.jsx)(l.a,{to:"/browse"},L()):Object(j.jsx)(l.a,{to:"/login"},L())}}]),a}(r.Component),v=a(29),f=a.n(v),x=a(7),O=(a(41),a(18)),y=a.n(O),C=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),isLoaded:!1,metadata:{},server:sessionStorage.getItem("server")||localStorage.getItem("server")},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,n=t.server,r="".concat(n,"/api/v1/metadata?a=").concat(a,"&r=0:16&s=popularity-des");y.a.get(r).then((function(t){return e.setState({isLoaded:!0,metadata:t.data})})).catch((function(t){console.error(t),null==a||null==n?e.props.history.push("/login"):t.response?401===t.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):t.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(n," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()}))}))}},{key:"render",value:function(){var e,t=this.state,a=t.isLoaded,n=t.metadata;return"tile"==sessionStorage.getItem("gallery")||"tile"==localStorage.getItem("gallery")?e=!0:("carousel"==sessionStorage.getItem("gallery")||"carousel"==localStorage.getItem("gallery")||(sessionStorage.setItem("gallery","carousel"),localStorage.setItem("gallery","carousel")),e=!1),a?Object(j.jsxs)("div",{className:"Browse",children:[Object(j.jsx)(le,{}),e?Object(j.jsx)(R,{metadata:n}):Object(j.jsx)(_,{metadata:n}),Object(j.jsx)(A,{})]}):Object(j.jsx)("div",{className:"Loading",children:Object(j.jsx)(f.a,{color:Re.palette.primary.main,size:75})})}}]),a}(r.Component),S=a(192),_=(a(149),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={metadata:n.props.metadata,server:sessionStorage.getItem("server")||localStorage.getItem("server")},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.metadata,a=e.server;return Object(j.jsx)("div",{className:"Carousel",children:t.length?t.map((function(e){return Object(j.jsxs)("div",{className:"carousel__category",children:[Object(j.jsx)(c.b,{to:"/browse/".concat(e.categoryInfo.name),className:"carousel__category__title no_decoration_link",children:e.categoryInfo.name},L()),Object(j.jsx)("div",{className:"carousel__items",children:e.children.length?e.children.map((function(e){return Object(j.jsxs)("figure",{className:"carousel__item__figure",children:[Object(j.jsx)(c.b,{to:"/view/".concat(e.id),children:Object(j.jsx)("img",{src:e.posterPath||"".concat(a,"/api/v1/image/poster?text=").concat(e.title,"&extention=jpeg"),className:"carousel__item__poster",alt:e.title},L())},L()),Object(j.jsx)(S.a,{className:"carousel__item__title",children:e.title},L())]},L())})):null})]},L())})):null})}}]),a}(r.Component)),k=a(43),w=a.n(k),I=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),category:n.props.match.params.category,isLoaded:!1,metadata:{},page:parseInt(w.a.parse(n.props.location.search).page)||1,range:"".concat(void 0===w.a.parse(n.props.location.search).page?"0:16":"".concat(16*(parseInt(w.a.parse(n.props.location.search).page)-1),":").concat(16*parseInt(w.a.parse(n.props.location.search).page))),server:sessionStorage.getItem("server")||localStorage.getItem("server"),sort:w.a.parse(n.props.location.search).sort||"alphabet-asc"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,n=t.category,r=t.range,o=t.server,i=t.sort,s="".concat(o,"/api/v1/metadata?a=").concat(a,"&c=").concat(n,"&r=").concat(r,"&s=").concat(i);y.a.get(s).then((function(t){return e.setState({isLoaded:!0,metadata:t.data,pages:Math.ceil(t.data[0].length/16)})})).catch((function(t){console.error(t),null==a||null==o?e.props.history.push("/login"):t.response?401===t.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):t.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(o," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()}))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata,n=e.page,r=e.pages,o=e.sort;return t?Object(j.jsxs)("div",{className:"CategoryBrowse",children:[Object(j.jsx)(le,{}),Object(j.jsx)(R,{metadata:a}),Object(j.jsx)(ve,{props:{page:n,pages:r,sort:o,thisprops:this.props}}),Object(j.jsx)(Ie,{props:{thisprops:this.props}}),Object(j.jsx)(A,{})]}):Object(j.jsx)("div",{className:"Loading",children:Object(j.jsx)(f.a,{color:Re.palette.primary.main,size:75})})}}]),a}(r.Component),N=a(197),T=a(208),B=a(212),D=a(196),E=(a(151),Object(D.a)((function(e){return{footer__container:{backgroundColor:e.palette.background.paper,width:"100%",height:"75px",display:"flex",alignItems:"center",justifyContent:"center"},formControl:{margin:e.spacing(2),minWidth:90}}})));function A(){var e=E(),t=sessionStorage.getItem("gallery")||localStorage.getItem("gallery")||"carousel";return Object(j.jsxs)("footer",{className:e.footer__container,id:"footer__container",children:[Object(j.jsx)("a",{href:"https://watchlist.ml",target:"_blank",children:Object(j.jsx)("img",{src:"https://https://telegra.ph/file/1300fea3f5fefb50bc5ff.png",className:"footer__github",height:"48px",alt:"github-logo"})}),Object(j.jsx)("a",{className:"no_decoration_link footer__text",href:"https://eliasbenb.github.io",target:"_blank",children:"\xa9 2021 - Thanks to developer - v1.1.6"}),Object(j.jsx)("div",{className:"gallery__select",children:Object(j.jsx)(N.a,{className:e.formControl,children:Object(j.jsxs)(T.a,{value:t,onChange:function(e){sessionStorage.setItem("gallery",e.target.value),localStorage.setItem("gallery",e.target.value),window.location.reload()},displayEmpty:!0,className:e.selectEmpty,inputProps:{"aria-label":"Without label"},children:[Object(j.jsx)(B.a,{value:"carousel",children:"Carousel"}),Object(j.jsx)(B.a,{value:"tile",children:"Tile"})]})})})]})}function L(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}a(153);var R=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={metadata:n.props.metadata,server:sessionStorage.getItem("server")||localStorage.getItem("server")},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.metadata,a=e.server;return Object(j.jsx)("div",{className:"Tile",children:t.length?t.map((function(e){return Object(j.jsxs)("div",{className:"tile__category",children:[Object(j.jsx)(c.b,{to:"/browse/".concat(e.categoryInfo.name),className:"tile__category__title no_decoration_link",children:e.categoryInfo.name},L()),Object(j.jsx)("div",{className:"tile__items",children:e.children.length?e.children.map((function(e){return Object(j.jsxs)("figure",{className:"tile__item__figure",children:[Object(j.jsx)(c.b,{to:"/view/".concat(e.id),children:Object(j.jsx)("img",{src:e.posterPath||"".concat(a,"/api/v1/image/poster?text=").concat(e.title,"&extention=jpeg"),className:"tile__item__poster",alt:e.title},L())},L()),Object(j.jsx)(S.a,{className:"tile__item__title",children:e.title},L())]},L())})):null})]},L())})):null})}}]),a}(r.Component),P=a(8),q=a(200),F=a(213),M=a(210),W=a(202),z=a(5),K=a(63),V=a.n(K),U=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:"",error:"",page:!1,password:"",server:"",signup:!1,tempServer:window.location.origin.startsWith("app://-")?"":window.location.origin,username:""},n.handleTempServerChange=n.handleTempServerChange.bind(Object(P.a)(n)),n.handlePassChange=n.handlePassChange.bind(Object(P.a)(n)),n.handleUserChange=n.handleUserChange.bind(Object(P.a)(n)),n.handleServerSubmit=n.handleServerSubmit.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.handleSignup=n.handleSignup.bind(Object(P.a)(n)),n.dismissError=n.dismissError.bind(Object(P.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.a.get("".concat(window.location.origin,"/api/v1/auth?rules=signup")).then((function(t){200===t.status?(localStorage.setItem("auth","0"),localStorage.setItem("server",window.location.origin),sessionStorage.setItem("auth","0"),sessionStorage.setItem("server",window.location.origin),e.props.history.push(t.data.success.content)):202===t.status&&e.setState({signup:!0})}))}},{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleServerSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.tempServer;if(!a)return this.setState({error:"Server is required"});a.startsWith("http")||(a="https://".concat(a)),y.a.get("".concat(a,"/api/v1/auth?rules=signup")).then((function(e){200===e.status?(localStorage.setItem("auth","0"),localStorage.setItem("server",a),sessionStorage.setItem("auth","0"),sessionStorage.setItem("server",a),t.props.history.push(e.data.success.content)):202===e.status&&t.setState({signup:!0,page:!0})})).catch((function(e){console.error(e);try{x.a.fire({title:"Error!",text:e.response.data.error.message,icon:"error",confirmButtonText:"OK"})}catch(t){x.a.fire({title:"Error!",text:"You were unable to communicate with the backend. Are you sure ".concat(a," is the correct server?"),icon:"error",confirmButtonText:"OK"})}}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=(a.auth,a.password),r=(a.server,a.tempServer),o=a.username;return r?(r.startsWith("http")||(r="https://".concat(r)),y.a.get("".concat(r,"/api/v1/auth?u=").concat(o,"&p=").concat(n)).then((function(e){localStorage.setItem("server",r),sessionStorage.setItem("server",r),localStorage.setItem("auth",e.data.auth),sessionStorage.setItem("auth",e.data.auth),t.props.history.push("/")})).catch((function(e){console.error(e);try{x.a.fire({title:"Error!",text:e.response.data.error.message,icon:"error",confirmButtonText:"OK"})}catch(t){x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend ".concat(r),icon:"error",confirmButtonText:"OK"})}})),this.setState({error:""})):this.setState({error:"Server is required"})}},{key:"handleSignup",value:function(){var e=this,t=this.state,a=t.password,n=t.tempServer,r=t.username;return r?a?(y.a.get("".concat(n,"/api/v1/signup?u=").concat(r,"&p=").concat(a)).then((function(t){console.log(t),localStorage.setItem("server",n),sessionStorage.setItem("server",n),localStorage.setItem("auth",t.data.success.content.auth),sessionStorage.setItem("auth",t.data.success.content.auth),e.props.history.push("/")})).catch((function(e){try{x.a.fire({title:"Error!",text:e.response.data.error.message,icon:"error",confirmButtonText:"OK"})}catch(t){x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend ".concat(n),icon:"error",confirmButtonText:"OK"})}})),this.setState({error:""})):this.setState({error:"Password is required"}):this.setState({error:"Username is required"})}},{key:"handleTempServerChange",value:function(e){this.setState({tempServer:e.target.value})}},{key:"handleUserChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.password,n=e.page,r=e.tempServer,o=e.username,i=this.props.classes;return n?Object(j.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(j.jsx)(d.a,{}),Object(j.jsxs)("div",{className:i.paper,children:[Object(j.jsx)(F.a,{className:i.avatar,children:Object(j.jsx)(V.a,{})}),Object(j.jsx)(S.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(j.jsxs)("form",{className:i.form,onSubmit:this.handleSubmit,noValidate:!0,children:[t&&Object(j.jsx)("div",{style:{},children:Object(j.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(j.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),t]})}),Object(j.jsx)(M.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"server",label:"Server",name:"server",autoComplete:"server",onChange:this.handleTempServerChange,value:r,autoFocus:!0,disabled:!0}),Object(j.jsx)(M.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:this.handleUserChange,value:o}),Object(j.jsx)(M.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.handlePassChange,value:a}),Object(j.jsx)(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,children:"Sign In"}),this.state.signup?Object(j.jsx)(W.a,{type:"button",onClick:this.handleSignup,fullWidth:!0,variant:"contained",color:"primary",className:i.submit,children:"Sign Up"}):Object(j.jsx)("div",{})]})]})]}):Object(j.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(j.jsx)(d.a,{}),Object(j.jsxs)("div",{className:i.paper,children:[Object(j.jsx)(F.a,{className:i.avatar,children:Object(j.jsx)(V.a,{})}),Object(j.jsx)(S.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(j.jsxs)("form",{className:i.form,onSubmit:this.handleServerSubmit,noValidate:!0,children:[t&&Object(j.jsx)("div",{style:{},children:Object(j.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(j.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),t]})}),Object(j.jsx)(M.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"server",label:"Server",name:"server",autoComplete:"server",onChange:this.handleTempServerChange,value:r,autoFocus:!0}),Object(j.jsx)(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,children:"Next"})]})]})]})}}]),a}(r.Component),Y=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(U),G=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isLoaded:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;localStorage.clear(),sessionStorage.clear(),setTimeout((function(){return e.setState({isLoaded:!0})}),500)}},{key:"render",value:function(){return this.state.isLoaded?Object(j.jsx)(l.a,{to:"/login"},L()):Object(j.jsx)("div",{className:"Loading",children:Object(j.jsx)(f.a,{color:Re.palette.primary.main,size:75})})}}]),a}(r.Component),J=a(33),X=a(57),H=a(203),$=a(204),Q=a(108),Z=a(104),ee=a(205),te=a(24),ae=a(76),ne=a.n(ae),re=a(101),oe=a.n(re),ie=a(206),se=a(81),ce=a.n(se),le=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={accounts:{},auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),categories:{},isLoaded:!1,server:sessionStorage.getItem("server")||localStorage.getItem("server")},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,n=t.server,r="".concat(n,"/api/v1/environment?a=").concat(a);y.a.get(r).then((function(t){return e.setState({accounts:t.data.account_list,categories:t.data.category_list,isLoaded:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.accounts,a=e.categories;return e.isLoaded?Object(j.jsx)("div",{className:"Nav",children:Object(j.jsx)(he,{props:{categories:a,accounts:t}})}):Object(j.jsx)("div",{className:"Nav",children:Object(j.jsx)(he,{props:{categories:[],accounts:[]}})})}}]),a}(r.Component),de=Object(D.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary},grow:{flexGrow:1},title:Object(X.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(X.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(te.b)(e.palette.common.main,.15),"&:hover":{backgroundColor:Object(te.b)(e.palette.common.main,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(X.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),browse:{marginRight:"15px"}}}));function he(e){var t=de(),a=Object(r.useState)(""),n=Object(J.a)(a,2),o=n[0],i=n[1];return Object(j.jsx)("div",{className:t.grow,children:Object(j.jsx)(H.a,{position:"static",className:t.root,children:Object(j.jsxs)($.a,{children:[Object(j.jsx)(c.b,{to:"/",className:"no_decoration_link",children:Object(j.jsx)(S.a,{className:t.title,variant:"h6",noWrap:!0,children:"libDrive"})}),Object(j.jsxs)("form",{className:t.search,onSubmit:function(e){e.preventDefault(),window.location.hash="#/search/".concat(o)},children:[Object(j.jsx)("div",{className:t.searchIcon,children:Object(j.jsx)(ce.a,{})}),Object(j.jsx)(Q.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){i(e.target.value)}})]}),Object(j.jsx)("div",{className:t.grow}),Object(j.jsx)(ue,{props:e.props.categories}),Object(j.jsx)(pe,{}),Object(j.jsx)(me,{props:e.props.accounts})]})})})}function ue(e){var t=o.a.useState(null),a=Object(J.a)(t,2),n=a[0],r=a[1],i=de(),s=function(){r(null)};return Object(j.jsxs)("div",{className:i.browse,children:[Object(j.jsx)(W.a,{"aria-controls":"browse-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},children:"Browse"}),Object(j.jsxs)(Z.a,{id:"browse-menu",anchorEl:n,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(n),onClose:s,children:[Object(j.jsx)(c.b,{to:"/",className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:s,children:"Home Page"})}),Object(j.jsx)(ee.a,{light:!0}),e.props.length?e.props.map((function(e){return Object(j.jsx)(c.b,{to:"/browse/".concat(e.name),className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:s,children:e.name})},L())})):null]})]})}function me(e){var t=this,a=o.a.useState(null),n=Object(J.a)(a,2),r=n[0],i=n[1],s=function(){i(null)},l=Object(j.jsx)(ne.a,{});return e.props.pic&&(e.props.pic.includes("http")||e.props.pic.includes("www"))&&(l=Object(j.jsx)("img",{src:e.props.pic,width:"32px",alt:"profile-pic"})),Object(j.jsxs)("div",{children:[Object(j.jsx)(ie.a,{"aria-label":"more","aria-controls":"account-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},children:l}),Object(j.jsxs)(Z.a,{id:"account-menu",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,open:Boolean(r),onClose:s,children:[Object(j.jsx)(c.b,{to:"/settings",className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:s,children:"Settings"})}),Object(j.jsx)(B.a,{onClick:function(){var e=sessionStorage.getItem("auth")||localStorage.getItem("auth"),a=sessionStorage.getItem("server")||localStorage.getItem("server"),n="".concat(a,"/api/v1/rebuild?a=").concat(e);y.a.get(n).then((function(e){return x.a.fire({title:"Success!",text:"libDrive's metadata is being rebuilt...",icon:"success",confirmButtonText:"OK"})})).catch((function(n){console.error(n),null==e||null==a?t.props.history.push("/login"):n.response?401===n.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(e){e.isConfirmed&&t.props.history.push("/logout")})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()})):n.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(a," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))}))},children:"Rebuild"}),Object(j.jsx)(c.b,{to:"/logout",className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:s,children:"Logout"})})]})]})}function pe(){var e=o.a.useState(null),t=Object(J.a)(e,2),a=t[0],n=t[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)(ie.a,{"aria-label":"more","aria-controls":"theme-menu","aria-haspopup":"true",onClick:function(e){n(e.currentTarget)},children:Object(j.jsx)(oe.a,{})}),Object(j.jsxs)(Z.a,{id:"theme-menu",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,open:Boolean(a),onClose:function(){n(null)},children:[Object(j.jsx)(B.a,{onClick:function(){n(null),localStorage.setItem("theme","light"),sessionStorage.setItem("theme","light"),window.location.reload()},children:"Light"}),Object(j.jsx)(B.a,{onClick:function(){n(null),localStorage.setItem("theme","dark"),sessionStorage.setItem("theme","dark"),window.location.reload()},children:"Dark"}),Object(j.jsx)(B.a,{onClick:function(){n(null),localStorage.setItem("theme","dracula"),sessionStorage.setItem("theme","dracula"),window.location.reload()},children:"Dracula"}),Object(j.jsx)(B.a,{onClick:function(){n(null),localStorage.setItem("theme","nordDark"),sessionStorage.setItem("theme","nordDark"),window.location.reload()},children:"Nord Dark"}),Object(j.jsx)(B.a,{onClick:function(){n(null),localStorage.setItem("theme","nordLight"),sessionStorage.setItem("theme","nordLight"),window.location.reload()},children:"Nord Light"})]})]})}var ge=a(215),je=a(209),be=Object(D.a)((function(e){return{root:{"& > *":{display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(4)}}}}));function ve(e){var t=e.props,a=t.page,r=t.pages,o=t.sort,i=t.thisprops,s=be();return a>r?Object(j.jsx)(l.a,{to:{pathname:i.location.pathname,search:"?page=".concat(r,"&sort=").concat(o)}},L()):Object(j.jsx)("div",{className:s.root,children:Object(j.jsx)(ge.a,{page:a,count:r,variant:"outlined",color:"primary",renderItem:function(e){return e.page?Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?page=".concat(e.page,"&sort=").concat(o)},className:"no_decoration_link",children:Object(j.jsx)(je.a,Object(n.a)({},e))},L()):Object(j.jsx)(je.a,Object(n.a)({},e))}})})}var fe=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),isLoaded:!1,metadata:[],query:n.props.match.params.q,server:sessionStorage.getItem("server")||localStorage.getItem("server")},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,n=t.query,r=t.server,o="".concat(r,"/api/v1/metadata?a=").concat(a,"&q=").concat(n);y.a.get(o).then((function(t){return e.setState({isLoaded:!0,metadata:t.data})})).catch((function(t){console.error(t),null==a||null==r?e.props.history.push("/login"):t.response?401===t.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):t.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(r," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()}))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata;return t?Object(j.jsxs)("div",{className:"Search",children:[Object(j.jsx)(le,{}),Object(j.jsx)(_,{metadata:a}),Object(j.jsx)(A,{})]}):Object(j.jsx)("div",{className:"Loading",children:Object(j.jsx)(f.a,{color:Re.palette.primary.main,size:75})})}}]),a}(r.Component),xe=a(64),Oe=a.n(xe),ye=a(82),Ce=a.n(ye),Se=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),error:"",isLoaded:!1,secret:sessionStorage.getItem("secret"),server:sessionStorage.getItem("server")||localStorage.getItem("server")},n.handleAccessTokenChange=n.handleAccessTokenChange.bind(Object(P.a)(n)),n.handleClientIDChange=n.handleClientIDChange.bind(Object(P.a)(n)),n.handleClientSecretChange=n.handleClientSecretChange.bind(Object(P.a)(n)),n.handleRefreshTokenChange=n.handleRefreshTokenChange.bind(Object(P.a)(n)),n.handleCategoryTypeChange=n.handleCategoryTypeChange.bind(Object(P.a)(n)),n.handleCategoryNameChange=n.handleCategoryNameChange.bind(Object(P.a)(n)),n.handleCategoryIdChange=n.handleCategoryIdChange.bind(Object(P.a)(n)),n.handleCategoryDriveIdChange=n.handleCategoryDriveIdChange.bind(Object(P.a)(n)),n.handleAddCategory=n.handleAddCategory.bind(Object(P.a)(n)),n.handleRemoveCategory=n.handleRemoveCategory.bind(Object(P.a)(n)),n.handleAccountUsernameChange=n.handleAccountUsernameChange.bind(Object(P.a)(n)),n.handleAccountPasswordChange=n.handleAccountPasswordChange.bind(Object(P.a)(n)),n.handleAccountPicChange=n.handleAccountPicChange.bind(Object(P.a)(n)),n.handleAddAccount=n.handleAddAccount.bind(Object(P.a)(n)),n.handleRemoveAccount=n.handleRemoveAccount.bind(Object(P.a)(n)),n.handleSecretChange=n.handleSecretChange.bind(Object(P.a)(n)),n.handleTMDBAPIKeyChange=n.handleTMDBAPIKeyChange.bind(Object(P.a)(n)),n.handleCloudflareChange=n.handleCloudflareChange.bind(Object(P.a)(n)),n.handleBuildIntervalChange=n.handleBuildIntervalChange.bind(Object(P.a)(n)),n.handleTranscodedChange=n.handleTranscodedChange.bind(Object(P.a)(n)),n.handleSignupChange=n.handleSignupChange.bind(Object(P.a)(n)),n.handleAuthChange=n.handleAuthChange.bind(Object(P.a)(n)),n.dismissError=n.dismissError.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.handleRestart=n.handleRestart.bind(Object(P.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,n=t.secret,r=t.server;null==sessionStorage.getItem("secret")?this.props.history.push("/settings/login"):y.a.get("".concat(r,"/api/v1/config?secret=").concat(n)).then((function(t){return e.setState({config:t.data,isLoaded:!0,postConfig:t.data,tempSecret:t.data.secret_key})})).catch((function(t){console.error(t),null==a||null==r?e.props.history.push("/login"):t.response?401===t.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Login"}).then((function(t){t.isConfirmed&&(sessionStorage.removeItem("secret"),e.props.history.push("/settings/login"))})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):t.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(r," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()}))}))}},{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleRestart",value:function(e){e.preventDefault();var t=this.state,a=t.secret,n=t.server;y.a.get("".concat(n,"/api/v1/restart?secret=").concat(a)).then((function(e){x.a.fire({title:"Success!",text:"libDrive is being restarted, this might take some time, so the app won't load",icon:"success",confirmButtonText:"OK"})})).catch((function(e){console.error(e),x.a.fire({title:"Success!",text:"libDrive is being restarted, this might take some time, so the app won't load",icon:"success",confirmButtonText:"OK"})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.secret,r=a.server;y.a.post("".concat(r,"/api/v1/config?secret=").concat(n),this.state.postConfig).then((function(e){x.a.fire({title:"Success!",text:"The config has been updated on the backend! The backend might need to be restarted for some changes to take effect.",icon:"success",confirmButtonText:"OK"})})).catch((function(e){console.error(e),e.response?401===e.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(e){e.isConfirmed&&(sessionStorage.removeItem("secret"),t.props.history.push("/settings/login"))})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()})):e.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(r," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))}))}},{key:"handleAccessTokenChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.access_token=t,this.setState({postConfig:a})}},{key:"handleClientIDChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.client_id=t,this.setState({postConfig:a})}},{key:"handleClientSecretChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.client_secret=t,this.setState({postConfig:a})}},{key:"handleRefreshTokenChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.refresh_token=t,this.setState({postConfig:a})}},{key:"handleCategoryTypeChange",value:function(e){var t=e.target.value.split("_")[0],a=e.target.value.split("_")[1],n=this.state.postConfig;n.category_list[a].type=t,this.setState({postConfig:n})}},{key:"handleCategoryNameChange",value:function(e){var t=e.target.value,a=e.target.id.split("_")[1],n=this.state.postConfig;n.category_list[a].name=t,this.setState({postConfig:n})}},{key:"handleCategoryIdChange",value:function(e){var t=e.target.value,a=e.target.id.split("_")[1],n=this.state.postConfig;n.category_list[a].id=t,this.setState({postConfig:n})}},{key:"handleCategoryDriveIdChange",value:function(e){var t=e.target.value,a=e.target.id.split("_")[1],n=this.state.postConfig;n.category_list[a].driveId=t,this.setState({postConfig:n})}},{key:"handleAddCategory",value:function(e){var t=this.state.postConfig;t.category_list.push({type:"",name:"",id:"",driveId:""}),this.setState({postConfig:t})}},{key:"handleRemoveCategory",value:function(e){var t=e.target.id.split("_")[1],a=this.state.postConfig;a.category_list.splice(t,1),this.setState({postConfig:a})}},{key:"handleAccountUsernameChange",value:function(e){var t=e.target.value,a=e.target.id.split("_")[1],n=this.state.postConfig;n.account_list[a].username=t,this.setState({postConfig:n})}},{key:"handleAccountPasswordChange",value:function(e){var t=e.target.value,a=e.target.id.split("_")[1],n=this.state.postConfig;n.account_list[a].password=t,this.setState({postConfig:n})}},{key:"handleAccountPicChange",value:function(e){var t=e.target.value,a=e.target.id.split("_")[1],n=this.state.postConfig;n.account_list[a].pic=t,this.setState({postConfig:n})}},{key:"handleAddAccount",value:function(e){for(var t=this.state.postConfig,a="",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<50;r++)a+=n.charAt(Math.floor(Math.random()*n.length));t.account_list.push({username:"",password:"",pic:"",auth:a}),this.setState({postConfig:t})}},{key:"handleRemoveAccount",value:function(e){var t=e.target.id.split("_")[1],a=this.state.postConfig;a.account_list.splice(t,1),this.setState({postConfig:a})}},{key:"handleSecretChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.secret_key=t,this.setState({postConfig:a})}},{key:"handleTMDBAPIKeyChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.tmdb_api_key=t,this.setState({postConfig:a})}},{key:"handleCloudflareChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.cloudflare=t,this.setState({postConfig:a})}},{key:"handleBuildIntervalChange",value:function(e){var t=parseInt(e.target.value),a=this.state.postConfig;a.build_interval=t,this.setState({postConfig:a})}},{key:"handleTranscodedChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.transcoded=t,this.setState({postConfig:a})}},{key:"handleSignupChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.signup=t,this.setState({postConfig:a})}},{key:"handleAuthChange",value:function(e){var t=e.target.value,a=this.state.postConfig;a.auth=t,this.setState({postConfig:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.config,n=t.isLoaded,r=this.props.classes;return n?Object(j.jsxs)("div",{className:"Settings",children:[Object(j.jsx)(le,{}),Object(j.jsxs)("form",{className:r.Form,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(j.jsx)(S.a,{variant:"h3",children:"Google Credentials"}),Object(j.jsx)(M.a,{className:"TextField",id:"access_token",label:"Access Token",type:"text",variant:"outlined",value:this.state.postConfig.access_token,onChange:this.handleAccessTokenChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"client_id",label:"Client ID",type:"text",variant:"outlined",value:this.state.postConfig.client_id,onChange:this.handleClientIDChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"client_secret",label:"Client Secret",type:"text",variant:"outlined",value:this.state.postConfig.client_secret,onChange:this.handleClientSecretChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"refresh_token",label:"Refresh Token",type:"text",variant:"outlined",value:this.state.postConfig.refresh_token,onChange:this.handleRefreshTokenChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"token_expiry",label:"Token Expiry",type:"text",variant:"outlined",value:this.state.postConfig.token_expiry,disabled:!0}),Object(j.jsx)("br",{}),Object(j.jsx)(S.a,{variant:"h3",children:"Categories"}),a.category_list.length?a.category_list.map((function(t,a){return Object(j.jsxs)("div",{style:{margin:"30px"},children:[Object(j.jsxs)(M.a,{className:"TextField",id:"category-type_".concat(a),select:!0,label:"Select Type",variant:"outlined",value:"".concat(e.state.postConfig.category_list[a].type,"_").concat(a),onChange:e.handleCategoryTypeChange,children:[Object(j.jsx)(B.a,{value:"Movies_".concat(a),children:"Movies"},L()),Object(j.jsx)(B.a,{value:"TV Shows_".concat(a),children:"TV Shows"},L())]}),Object(j.jsx)(M.a,{className:"TextField",id:"category-name_".concat(a),label:"Name",variant:"outlined",value:e.state.postConfig.category_list[a].name,onChange:e.handleCategoryNameChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"category-id_".concat(a),label:"Folder ID",variant:"outlined",value:e.state.postConfig.category_list[a].id,onChange:e.handleCategoryIdChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"category-driveId_".concat(a),label:"Team Drive ID",variant:"outlined",value:e.state.postConfig.category_list[a].driveId,onChange:e.handleCategoryDriveIdChange,required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)(ie.a,{"aria-label":"remove",id:"category-remove_".concat(a),onClick:e.handleRemoveCategory,children:Object(j.jsx)(Ce.a,{id:"category-remove_".concat(a)})}),Object(j.jsx)(ie.a,{"aria-label":"add",onClick:e.handleAddCategory,children:Object(j.jsx)(Oe.a,{id:"category-add_".concat(a)})})]},a)})):Object(j.jsx)(ie.a,{"aria-label":"add",onClick:this.handleAddCategory,children:Object(j.jsx)(Oe.a,{})}),Object(j.jsx)(S.a,{variant:"h3",children:"Accounts"}),a.account_list.length?a.account_list.map((function(t,n){return Object(j.jsxs)("div",{style:{margin:"30px"},children:[Object(j.jsx)(M.a,{className:"TextField",id:"account-username_".concat(n),label:"Username",variant:"outlined",value:e.state.postConfig.account_list[n].username,onChange:e.handleAccountUsernameChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"account-password_".concat(n),label:"Password",type:"password",variant:"outlined",value:e.state.postConfig.account_list[n].password,onChange:e.handleAccountPasswordChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"account-pic_".concat(n),label:"Picture",variant:"outlined",value:e.state.postConfig.account_list[n].pic,onChange:e.handleAccountPicChange}),Object(j.jsx)(M.a,{className:"TextField",id:"account-auth_".concat(n),label:"Auth",variant:"outlined",value:e.state.postConfig.account_list[n].auth,disabled:!0}),Object(j.jsx)("br",{}),Object(j.jsx)(ie.a,{"aria-label":"remove",id:"account-remove_".concat(n),onClick:e.handleRemoveAccount,children:Object(j.jsx)(Ce.a,{id:"account-remove_".concat(n)})}),Object(j.jsx)(ie.a,{"aria-label":"add",onClick:e.handleAddAccount,children:Object(j.jsx)(Oe.a,{id:"account-add_".concat(n)})}),Object(j.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:a.account_list[n].pic.length>0?Object(j.jsx)("img",{src:a.account_list[n].pic,width:"32px",alt:"profile-pic"}):Object(j.jsx)(ne.a,{style:{fontSize:"32px"}})})]},n)})):Object(j.jsx)(ie.a,{"aria-label":"add",onClick:this.handleAddAccount,children:Object(j.jsx)(Oe.a,{})}),Object(j.jsx)(S.a,{variant:"h3",children:"Extras"}),Object(j.jsxs)("div",{style:{margin:"30px"},children:[Object(j.jsx)(M.a,{className:"TextField",id:"secret_key",label:"Secret Key",type:"password",variant:"outlined",value:this.state.postConfig.secret_key,onChange:this.handleSecretChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"tmbd_api_key",label:"TMDB API Key",type:"text",variant:"outlined",value:this.state.postConfig.tmdb_api_key,onChange:this.handleTMDBAPIKeyChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"cloudflare",label:"Cloudflare",type:"text",variant:"outlined",value:this.state.postConfig.cloudflare,onChange:this.handleCloudflareChange,required:!0}),Object(j.jsx)(M.a,{className:"TextField",id:"build_interval",label:"Build Interval",type:"number",variant:"outlined",value:this.state.postConfig.build_interval,onChange:this.handleBuildIntervalChange,required:!0}),Object(j.jsx)("br",{}),Object(j.jsxs)(M.a,{className:"TextField",id:"transcoded",select:!0,label:"Transcoded",variant:"outlined",value:this.state.postConfig.transcoded||!1,onChange:this.handleTranscodedChange,children:[Object(j.jsx)(B.a,{value:!0,children:"true"},L()),Object(j.jsx)(B.a,{value:!1,children:"false"},L())]}),Object(j.jsxs)(M.a,{className:"TextField",id:"signup",select:!0,label:"Sign Up",variant:"outlined",value:this.state.postConfig.signup||!1,onChange:this.handleSignupChange,children:[Object(j.jsx)(B.a,{value:!0,children:"true"},L()),Object(j.jsx)(B.a,{value:!1,children:"false"},L())]}),Object(j.jsxs)(M.a,{className:"TextField",id:"auth",select:!0,label:"Authentication",variant:"outlined",value:this.state.postConfig.auth||!0,onChange:this.handleAuthChange,children:[Object(j.jsx)(B.a,{value:!0,children:"true"},L()),Object(j.jsx)(B.a,{value:!1,children:"false"},L())]})]}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{style:{margin:"30px"},children:[Object(j.jsx)(W.a,{style:{marginRight:"20px"},fullWidth:!0,variant:"contained",color:"secondary",className:r.submit,target:"_blank",href:"https://libdrive-config.netlify.app/",children:"Create Config"}),Object(j.jsx)(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,children:"Submit"}),Object(j.jsx)(W.a,{style:{marginLeft:"20px"},fullWidth:!0,variant:"contained",color:"secondary",className:r.submit,onClick:this.handleRestart,children:"Restart"})]})]}),Object(j.jsx)(A,{})]}):Object(j.jsx)("div",{className:"Loading",children:Object(j.jsx)(f.a,{color:Re.palette.primary.main,size:75})})}}]),a}(r.Component),_e=Object(z.a)((function(e){return{Form:{textAlign:"center","& .MuiTextField-root":{width:"30ch",margin:e.spacing(1),textAlign:"left"},"& .MuiTypography-root":{margin:"30px 30px"}},submit:{margin:e.spacing(4,0,2),width:"20ch"}}}),{withTheme:!0})(Se),ke=function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),error:"",secret:"",server:sessionStorage.getItem("server")||localStorage.getItem("server")},n.handleSecretChange=n.handleSecretChange.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.dismissError=n.dismissError.bind(Object(P.a)(n)),n}return Object(m.a)(a,[{key:"dismissError",value:function(){this.setState({error:""})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.secret,r=a.server;return n?(y.a.get("".concat(r,"/api/v1/config?secret=").concat(n)).then((function(e){sessionStorage.setItem("secret",n),t.props.history.push("/settings")})).catch((function(e){console.error(e),e.response?401===e.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"OK"}):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"OK"}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()})):e.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend. Is ${server} the correct address?",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(e){e.isConfirmed?t.props.history.push("/logout"):e.isDismissed&&location.reload()}))})),this.setState({error:""})):this.setState({error:"Secret is required"})}},{key:"handleSecretChange",value:function(e){this.setState({secret:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.secret,n=this.props.classes;return Object(j.jsxs)("div",{className:"SettingsLoginForm",children:[Object(j.jsx)(le,{}),Object(j.jsxs)(q.a,{component:"main",maxWidth:"xs",children:[Object(j.jsx)(d.a,{}),Object(j.jsxs)("div",{className:n.paper,children:[Object(j.jsx)(F.a,{className:n.avatar,children:Object(j.jsx)(V.a,{})}),Object(j.jsx)(S.a,{component:"h1",variant:"h5",children:"Settings Login"}),Object(j.jsxs)("form",{className:n.form,onSubmit:this.handleSubmit,noValidate:!0,children:[t&&Object(j.jsx)("div",{style:{},children:Object(j.jsxs)("h3",{"data-test":"error",onClick:this.dismissError,children:[Object(j.jsx)("button",{onClick:this.dismissError,children:"\u2716"}),t]})}),Object(j.jsx)(M.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"secret",label:"Secret",name:"secret",type:"password",autoComplete:"secret",onChange:this.handleSecretChange,value:a,required:!0,autoFocus:!0}),Object(j.jsx)(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Sign In"})]})]})]})]})}}]),a}(r.Component),we=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),{withTheme:!0})(ke);a(155);function Ie(e){var t=o.a.useState(null),a=Object(J.a)(t,2),n=a[0],r=a[1],i=e.props.thisprops;return Object(j.jsx)("div",{className:"SortMenu",children:Object(j.jsxs)("div",{className:"sort__container",children:[Object(j.jsx)(W.a,{"aria-controls":"sort-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},variant:"outlined",color:"primary",children:"Sort"}),Object(j.jsxs)(Z.a,{id:"sort-menu",anchorEl:n,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(n),onClose:function(){r(null)},children:[Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=alphabet-asc"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Alphabet Ascending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=alphabet-des"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Alphabet Descending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=date-asc"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Date Ascending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=date-des"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Date Descending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=popularity-asc"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Popularity Ascending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=popularity-des"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Popularity Descending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=vote-asc"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Vote Ascending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=vote-des"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Vote Descending"})},L()),Object(j.jsx)(c.b,{to:{pathname:i.location.pathname,search:"?sort=random"},className:"no_decoration_link",children:Object(j.jsx)(B.a,{children:"Random"})},L())]})]})})}var Ne,Te=a(103),Be=Object(Te.a)({palette:{type:"light",primary:{main:"#4197fe"},secondary:{main:"#68a0e5"},error:{main:"#d32f2f"},warning:{main:"#ff9800"},success:{main:"#4caf50"},background:{default:"#fafafa",paper:"#e8e8e8"},text:{primary:"#0f0f0f"},common:{main:"#000000"}}}),De=Object(Te.a)({palette:{type:"dark",primary:{main:"#4197fe"},secondary:{main:"#68a0e5"},error:{main:"#d32f2f"},warning:{main:"#ff9800"},success:{main:"#4caf50"},background:{default:"#111111",paper:"#1f1f1f"},text:{primary:"#ffffff"},common:{main:"#ffffff"}}}),Ee=Object(Te.a)({palette:{type:"dark",primary:{main:"#6272a4"},secondary:{main:"#44475a"},error:{main:"#ffb86c"},warning:{main:"#ff5555"},success:{main:"#50fa7b"},background:{default:"#282a36",paper:"#242630"},text:{primary:"#f8f8f2"},common:{main:"#6272a4"}}}),Ae=Object(Te.a)({palette:{type:"dark",primary:{main:"#5E81AC"},secondary:{main:"#88C0D0"},error:{main:"#BF616A"},warning:{main:"#EBCB8B"},success:{main:"#A3BE8C"},background:{default:"#2E3440",paper:"#3B4252"},text:{primary:"#ECEFF4"},common:{main:"#81A1C1"}}}),Le=Object(Te.a)({palette:{type:"light",primary:{main:"#5E81AC"},secondary:{main:"#88C0D0"},error:{main:"#BF616A"},warning:{main:"#EBCB8B"},success:{main:"#A3BE8C"},background:{default:"#E5E9F0",paper:"#D8DEE9"},text:{primary:"#2E3440"},common:{main:"#5E81AC"}}});"light"===localStorage.getItem("theme")||"light"===sessionStorage.getItem("theme")?Ne=Be:"dark"===localStorage.getItem("theme")||"dark"===sessionStorage.getItem("theme")?Ne=De:"dracula"===localStorage.getItem("theme")||"dracula"===sessionStorage.getItem("theme")?Ne=Ee:"nordDark"===localStorage.getItem("theme")||"nordDark"===sessionStorage.getItem("theme")?Ne=Ae:"nordLight"===localStorage.getItem("theme")||"nordLight"===sessionStorage.getItem("theme")?Ne=Le:(Ne=De,localStorage.setItem("theme","dark"),sessionStorage.setItem("theme","dark"));var Re=Ne;function Pe(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var qe=a(214),Fe=a(83),Me=(a(156),a(157),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={server:sessionStorage.getItem("server")||localStorage.getItem("server"),auth:sessionStorage.getItem("auth")||localStorage.getItem("auth"),id:n.props.match.params.id,isLoaded:!1,metadata:{}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state,a=t.auth,n=t.id,r=t.server,o="".concat(r,"/api/v1/metadata?a=").concat(a,"&id=").concat(n);document.documentElement.style.setProperty("--plyr-color-main",Re.palette.primary.main),document.documentElement.style.setProperty("--plyr-video-background",Re.palette.background.default),document.documentElement.style.setProperty("--plyr-menu-background",Re.palette.background.paper),document.documentElement.style.setProperty("--plyr-menu-color",Re.palette.text.primary),y.a.get(o).then((function(t){e.setState({metadata:t.data,isLoaded:!0})})).catch((function(t){console.error(t),null==a||null==r?e.props.history.push("/login"):t.response?401===t.response.status?x.a.fire({title:"Error!",text:"Your credentials are invalid!",icon:"error",confirmButtonText:"Logout"}).then((function(t){t.isConfirmed&&e.props.history.push("/logout")})):x.a.fire({title:"Error!",text:"Something went wrong while communicating with the backend!",icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()})):t.request&&x.a.fire({title:"Error!",text:"libDrive could not communicate with the backend! Is ".concat(r," the correct address?"),icon:"error",confirmButtonText:"Logout",cancelButtonText:"Retry",showCancelButton:!0}).then((function(t){t.isConfirmed?e.props.history.push("/logout"):t.isDismissed&&location.reload()}))}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,a=e.metadata,n=this.state;return n.thisprops=this.props,t&&"file"==a.type?Object(j.jsxs)("div",{className:"View",children:[Object(j.jsx)(le,{}),Object(j.jsx)(We,{props:n}),Object(j.jsx)(A,{})]}):t&&"directory"==a.type&&a.title?Object(j.jsxs)("div",{className:"View",children:[Object(j.jsx)(le,{}),Object(j.jsx)(ze,{props:n}),Object(j.jsx)(A,{})]}):t&&"directory"==a.type?Object(j.jsxs)("div",{className:"View",children:[Object(j.jsx)(le,{}),Object(j.jsx)(Ke,{props:n}),Object(j.jsx)(A,{})]}):Object(j.jsx)("div",{className:"Loading",children:Object(j.jsx)(f.a,{color:Re.palette.primary.main,size:75})})}}]),a}(r.Component));function We(e){var t=e.props,a=t.auth,n=t.id,r=t.metadata,o=t.server;return Object(j.jsxs)("div",{className:"MovieView",children:[Object(j.jsx)("div",{className:"plyr__component",style:{},children:Object(j.jsx)(Fe.a,{source:{type:"video",poster:r.backdropPath||"".concat(o,"/api/v1/image/thumbnail?id=").concat(r.id)||"",sources:[{src:"".concat(o,"/api/v1/redirectdownload/").concat(r.name,"?a=").concat(a,"&id=").concat(n,"&quality=transcoded")}]},options:{controls:["play","progress","current-time","duration","mute","volume","pip","settings","fullscreen"]}})}),Object(j.jsxs)("div",{className:"info__container",children:[Object(j.jsx)("div",{className:"info__left",children:Object(j.jsx)("img",{className:"info__poster",src:r.posterPath||"".concat(o,"/api/v1/image/poster?text=").concat(r.title,"&extention=jpeg")})}),Object(j.jsxs)("div",{className:"info__right",children:[Object(j.jsx)(S.a,{variant:"h2",className:"info__title",children:r.title}),Object(j.jsx)(S.a,{variant:"body1",className:"info__overview",style:{marginTop:"30px"},children:r.overview}),Object(j.jsx)("div",{className:"vote__container",children:Object(j.jsx)(qe.a,{name:"Rating",value:r.voteAverage,max:10,readOnly:!0})}),Object(j.jsx)(Ve,{props:e.props})]})]})]})}function ze(e){var t=e.props,a=t.metadata,n=t.server;return Object(j.jsx)("div",{className:"TVBView",children:Object(j.jsxs)("div",{className:"info__container",children:[Object(j.jsx)("div",{className:"info__left",children:Object(j.jsx)("img",{className:"info__poster",src:a.posterPath||"".concat(n,"/api/v1/image/poster?text=").concat(a.title,"&extention=jpeg")})}),Object(j.jsxs)("div",{className:"info__right",children:[Object(j.jsx)(S.a,{variant:"h2",className:"info__title",children:a.title}),Object(j.jsx)(S.a,{variant:"body1",className:"info__overview",style:{marginTop:"30px"},children:a.overview}),Object(j.jsx)("div",{className:"vote__container",children:Object(j.jsx)(qe.a,{name:"Rating",value:a.voteAverage,max:10,readOnly:!0})}),Object(j.jsx)("div",{className:"buttons__container",children:Object(j.jsx)("div",{className:"button",children:Object(j.jsx)(Ue,{props:e.props})})})]})]})})}function Ke(e){var t=e.props,a=t.auth,n=t.metadata,r=t.server,o=t.thisprops,i=parseInt(w.a.parse(o.location.search).q)||0;function s(e,t){return e===t?"pls-playing":""}return Object(j.jsxs)("div",{className:"TVSView",children:[Object(j.jsx)(S.a,{variant:"h2",style:{textAlign:"center",marginTop:"25px"},children:n.name}),Object(j.jsx)(S.a,{variant:"h5",style:{textAlign:"center",marginTop:"15px"},children:n.children[i].name}),Object(j.jsxs)("div",{className:"plyr__component",children:[Object(j.jsx)(Fe.a,{preload:"none",source:{type:"video",poster:n.backdropPath||"".concat(r,"/api/v1/image/thumbnail?id=").concat(n.children[i].id)||"",sources:[{src:"".concat(r,"/api/v1/redirectdownload/").concat(n.children[i].name,"?a=").concat(a,"&id=").concat(n.children[i].id,"&quality=transcoded")}]},options:{controls:["play","progress","current-time","duration","mute","volume","pip","settings","fullscreen"]}}),Object(j.jsx)("div",{className:"plyr-playlist-wrapper",children:Object(j.jsx)("ul",{className:"plyr-playlist",children:n.children.length?n.children.map((function(e,t){return Object(j.jsx)("li",{className:s(t,i),children:Object(j.jsxs)(c.b,{to:{pathname:o.location.pathname,search:"?q=".concat(t)},children:[Object(j.jsx)("img",{className:"plyr-miniposter"}),e.name]},Pe())},t)})):null})})]}),Object(j.jsxs)("div",{style:{textAlign:"center",marginBottom:"5vh"},children:[Object(j.jsx)(Ve,{props:{auth:a,id:n.children[i].id,metadata:n.children[i],server:r}}),Object(j.jsx)(Ye,{props:e.props})]})]})}function Ve(e){var t=o.a.useState(null),a=Object(J.a)(t,2),n=a[0],r=a[1],i=function(){r(null)},s=e.props,c=s.auth,l=s.id,d=s.metadata,h=s.server;return Object(j.jsxs)("div",{className:"PlayerMenu",style:{marginTop:"30px"},children:[Object(j.jsx)(W.a,{"aria-controls":"player-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},variant:"contained",color:"primary",children:"External Player"}),Object(j.jsxs)(Z.a,{id:"player-menu",anchorEl:n,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(n),onClose:i,children:[Object(j.jsx)("a",{href:"vlc://".concat(h,"/api/v1/redirectdownload/").concat(d.name,"?a=").concat(c,"&id=").concat(l),className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:i,children:"VLC"})}),Object(j.jsx)("a",{href:"potplayer://".concat(h,"/api/v1/redirectdownload/").concat(d.name,"?a=").concat(c,"&id=").concat(l),className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:i,children:"PotPlayer"})}),Object(j.jsx)(ee.a,{}),Object(j.jsx)(B.a,{onClick:function(){navigator.clipboard.writeText("".concat(h,"/api/v1/redirectdownload/").concat(d.name,"?a=").concat(c,"&id=").concat(l)),r(null)},children:"Copy"}),Object(j.jsx)("a",{href:"".concat(h,"/api/v1/redirectdownload/").concat(d.name,"?a=").concat(c,"&id=").concat(l),className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:i,children:"Download"})})]})]})}function Ue(e){var t=o.a.useState(null),a=Object(J.a)(t,2),n=a[0],r=a[1],i=function(){r(null)},s=e.props.metadata;return Object(j.jsxs)("div",{className:"ChildrenMenu",style:{marginTop:"30px"},children:[Object(j.jsx)(W.a,{"aria-controls":"children-menu","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},variant:"contained",color:"primary",children:"Seasons"}),Object(j.jsx)(Z.a,{id:"children-menu",anchorEl:n,keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(n),onClose:i,children:s.children.length?s.children.map((function(e){return Object(j.jsx)(c.b,{to:"/view/".concat(e.id),className:"no_decoration_link",children:Object(j.jsx)(B.a,{onClick:i,children:e.name})},Pe())})):null})]})}function Ye(e){return Object(j.jsx)("div",{className:"PlaylistMenu",style:{marginTop:"30px"},children:Object(j.jsx)(W.a,{onClick:function(){!function(e){var t=e.props,a=t.auth,n=(t.id,t.metadata),r=t.server,o="#EXTM3U\n";for(var i in n.children)o+="#EXTINF:0, ".concat(n.children[i].name,"\n").concat(r,"/api/v1/redirectdownload/").concat(n.children[i].name,"?a=").concat(a,"&id=").concat(n.children[i].id,"\n");var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(o)),s.setAttribute("download","playlist.m3u8"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}(e)},variant:"contained",color:"primary",children:"m3u8 Playlist"})})}a(158);s.a.render(Object(j.jsx)(c.a,{children:Object(j.jsxs)(h.a,{theme:Re,children:[Object(j.jsx)(d.a,{}),Object(j.jsx)(l.b,{exact:!0,path:"/",render:function(e){return Object(j.jsx)(b,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/browse",render:function(e){return Object(j.jsx)(C,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/browse/:category",render:function(e){return Object(j.jsx)(I,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/login",render:function(e){return Object(j.jsx)(Y,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/logout",render:function(e){return Object(j.jsx)(G,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/search/:q",render:function(e){return Object(j.jsx)(fe,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/settings",render:function(e){return Object(j.jsx)(_e,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/settings/login",render:function(e){return Object(j.jsx)(we,Object(n.a)({},e),L())}}),Object(j.jsx)(l.b,{exact:!0,path:"/view/:id",render:function(e){return Object(j.jsx)(Me,Object(n.a)({},e),L())}})]})}),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.819d7072.chunk.js.map
